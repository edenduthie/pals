package pals.database;

import org.springframework.beans.factory.annotation.Autowired;
import org.testng.Assert;
import org.testng.annotations.Test;

import pals.BaseTest;
import pals.Generator;
import pals.database.AddressDAO;
import pals.entity.Address;

public class AddressDAOTest extends BaseTest
{
    @Autowired AddressDAO addressDAO;
    
    @Test
    public void putGetUpdateDelete()
    {
    	Address address = Generator.address();
    	addressDAO.put(address);
    	Address result = addressDAO.get(address.getId());
    	Assert.assertTrue(address.equals(result));
    	Address newAddress = Generator.address();
    	newAddress.setStreet("new address");
    	address.update(newAddress);
    	addressDAO.update(address);
    	result = addressDAO.get(address.getId());
    	Assert.assertEquals(result.getStreet(), newAddress.getStreet());
    	addressDAO.deleteAll();
    }
    
//    @Test
//    public void testFullInput()
//    {
//    	Address address = Generator.address();
//    	address.setAddressJSON("[{\"address_components\":[{\"long_name\":\"32\",\"short_name\":\"32\",\"types\":[\"street_number\"]},{\"long_name\":\"Marshall Ave\",\"short_name\":\"Marshall Ave\",\"types\":[\"route\"]},{\"long_name\":\"Clayton\",\"short_name\":\"Clayton\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Victoria\",\"short_name\":\"VIC\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Australia\",\"short_name\":\"AU\",\"types\":[\"country\",\"political\"]},{\"long_name\":\"3168\",\"short_name\":\"3168\",\"types\":[\"postal_code\"]}],\"formatted_address\":\"32 Marshall Ave, Clayton VIC 3168, Australia\",\"geometry\":{\"location\":{\"$a\":-37.909848,\"ab\":145.12742400000002},\"location_type\":\"ROOFTOP\",\"viewport\":{\"Z\":{\"b\":-37.9111969802915,\"d\":-37.9084990197085},\"ca\":{\"b\":145.12607501970854,\"d\":145.1287729802915}}},\"types\":[\"street_address\"]},{\"address_components\":[{\"long_name\":\"32\",\"short_name\":\"32\",\"types\":[\"street_number\"]},{\"long_name\":\"Marshall Ave\",\"short_name\":\"Marshall Ave\",\"types\":[\"route\"]},{\"long_name\":\"St Albans\",\"short_name\":\"St Albans\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Victoria\",\"short_name\":\"VIC\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Australia\",\"short_name\":\"AU\",\"types\":[\"country\",\"political\"]},{\"long_name\":\"3021\",\"short_name\":\"3021\",\"types\":[\"postal_code\"]}],\"formatted_address\":\"32 Marshall Ave, St Albans VIC 3021, Australia\",\"geometry\":{\"location\":{\"$a\":-37.744742,\"ab\":144.82666599999993},\"location_type\":\"ROOFTOP\",\"viewport\":{\"Z\":{\"b\":-37.7460909802915,\"d\":-37.7433930197085},\"ca\":{\"b\":144.82531701970856,\"d\":144.82801498029153}}},\"types\":[\"street_address\"]},{\"address_components\":[{\"long_name\":\"32\",\"short_name\":\"32\",\"types\":[\"street_number\"]},{\"long_name\":\"Marshall Ave\",\"short_name\":\"Marshall Ave\",\"types\":[\"route\"]},{\"long_name\":\"Moe\",\"short_name\":\"Moe\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Victoria\",\"short_name\":\"VIC\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Australia\",\"short_name\":\"AU\",\"types\":[\"country\",\"political\"]},{\"long_name\":\"3825\",\"short_name\":\"3825\",\"types\":[\"postal_code\"]}],\"formatted_address\":\"32 Marshall Ave, Moe VIC 3825, Australia\",\"geometry\":{\"location\":{\"$a\":-38.184083,\"ab\":146.25104},\"location_type\":\"ROOFTOP\",\"viewport\":{\"Z\":{\"b\":-38.1854319802915,\"d\":-38.18273401970851},\"ca\":{\"b\":146.2496910197085,\"d\":146.25238898029147}}},\"types\":[\"street_address\"]},{\"address_components\":[{\"long_name\":\"32\",\"short_name\":\"32\",\"types\":[\"street_number\"]},{\"long_name\":\"Marshall Ave\",\"short_name\":\"Marshall Ave\",\"types\":[\"route\"]},{\"long_name\":\"Kew\",\"short_name\":\"Kew\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Victoria\",\"short_name\":\"VIC\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Australia\",\"short_name\":\"AU\",\"types\":[\"country\",\"political\"]},{\"long_name\":\"3101\",\"short_name\":\"3101\",\"types\":[\"postal_code\"]}],\"formatted_address\":\"32 Marshall Ave, Kew VIC 3101, Australia\",\"geometry\":{\"location\":{\"$a\":-37.805605,\"ab\":145.04746799999998},\"location_type\":\"ROOFTOP\",\"viewport\":{\"Z\":{\"b\":-37.8069539802915,\"d\":-37.8042560197085},\"ca\":{\"b\":145.0461190197085,\"d\":145.04881698029146}}},\"types\":[\"street_address\"]},{\"address_components\":[{\"long_name\":\"32\",\"short_name\":\"32\",\"types\":[\"street_number\"]},{\"long_name\":\"Marshall Ave\",\"short_name\":\"Marshall Ave\",\"types\":[\"route\"]},{\"long_name\":\"Doncaster\",\"short_name\":\"Doncaster\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Victoria\",\"short_name\":\"VIC\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Australia\",\"short_name\":\"AU\",\"types\":[\"country\",\"political\"]},{\"long_name\":\"3108\",\"short_name\":\"3108\",\"types\":[\"postal_code\"]}],\"formatted_address\":\"32 Marshall Ave, Doncaster VIC 3108, Australia\",\"geometry\":{\"bounds\":{\"Z\":{\"b\":-37.7894458,\"d\":-37.7894457},\"ca\":{\"b\":145.13549109999997,\"d\":145.13549209999996}},\"location\":{\"$a\":-37.7894457,\"ab\":145.13549109999997},\"location_type\":\"RANGE_INTERPOLATED\",\"viewport\":{\"Z\":{\"b\":-37.7907947302915,\"d\":-37.7880967697085},\"ca\":{\"b\":145.13414261970854,\"d\":145.1368405802915}}},\"partial_match\":true,\"types\":[\"street_address\"]},{\"address_components\":[{\"long_name\":\"32\",\"short_name\":\"32\",\"types\":[\"street_number\"]},{\"long_name\":\"Marshall Ave\",\"short_name\":\"Marshall Ave\",\"types\":[\"route\"]},{\"long_name\":\"Highett\",\"short_name\":\"Highett\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Victoria\",\"short_name\":\"VIC\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Australia\",\"short_name\":\"AU\",\"types\":[\"country\",\"political\"]},{\"long_name\":\"3190\",\"short_name\":\"3190\",\"types\":[\"postal_code\"]}],\"formatted_address\":\"32 Marshall Ave, Highett VIC 3190, Australia\",\"geometry\":{\"bounds\":{\"Z\":{\"b\":-37.9513795,\"d\":-37.9513794},\"ca\":{\"b\":145.02788069999997,\"d\":145.02788169999997}},\"location\":{\"$a\":-37.9513795,\"ab\":145.02788169999997},\"location_type\":\"RANGE_INTERPOLATED\",\"viewport\":{\"Z\":{\"b\":-37.9527284302915,\"d\":-37.9500304697085},\"ca\":{\"b\":145.02653221970854,\"d\":145.0292301802915}}},\"partial_match\":true,\"types\":[\"street_address\"]},{\"address_components\":[{\"long_name\":\"32\",\"short_name\":\"32\",\"types\":[\"street_number\"]},{\"long_name\":\"Marshall Ave\",\"short_name\":\"Marshall Ave\",\"types\":[\"route\"]},{\"long_name\":\"Montmorency\",\"short_name\":\"Montmorency\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Victoria\",\"short_name\":\"VIC\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Australia\",\"short_name\":\"AU\",\"types\":[\"country\",\"political\"]},{\"long_name\":\"3094\",\"short_name\":\"3094\",\"types\":[\"postal_code\"]}],\"formatted_address\":\"32 Marshall Ave, Montmorency VIC 3094, Australia\",\"geometry\":{\"bounds\":{\"Z\":{\"b\":-37.7233882,\"d\":-37.7233882},\"ca\":{\"b\":145.12671699999999,\"d\":145.12671799999998}},\"location\":{\"$a\":-37.7233882,\"ab\":145.12671799999998},\"location_type\":\"RANGE_INTERPOLATED\",\"viewport\":{\"Z\":{\"b\":-37.7247371802915,\"d\":-37.7220392197085},\"ca\":{\"b\":145.12536851970845,\"d\":145.12806648029152}}},\"partial_match\":true,\"types\":[\"street_address\"]},{\"address_components\":[{\"long_name\":\"32\",\"short_name\":\"32\",\"types\":[\"street_number\"]},{\"long_name\":\"Marshall Ave\",\"short_name\":\"Marshall Ave\",\"types\":[\"route\"]},{\"long_name\":\"Macedon\",\"short_name\":\"Macedon\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Victoria\",\"short_name\":\"VIC\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Australia\",\"short_name\":\"AU\",\"types\":[\"country\",\"political\"]},{\"long_name\":\"3440\",\"short_name\":\"3440\",\"types\":[\"postal_code\"]}],\"formatted_address\":\"32 Marshall Ave, Macedon VIC 3440, Australia\",\"geometry\":{\"bounds\":{\"Z\":{\"b\":-37.4335556,\"d\":-37.4335549},\"ca\":{\"b\":144.57589159999998,\"d\":144.57589180000002}},\"location\":{\"$a\":-37.4335549,\"ab\":144.57589180000002},\"location_type\":\"RANGE_INTERPOLATED\",\"viewport\":{\"Z\":{\"b\":-37.4349042302915,\"d\":-37.4322062697085},\"ca\":{\"b\":144.57454271970846,\"d\":144.57724068029154}}},\"partial_match\":true,\"types\":[\"street_address\"]},{\"address_components\":[{\"long_name\":\"32\",\"short_name\":\"32\",\"types\":[\"street_number\"]},{\"long_name\":\"Marshall St\",\"short_name\":\"Marshall St\",\"types\":[\"route\"]},{\"long_name\":\"Ivanhoe\",\"short_name\":\"Ivanhoe\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Victoria\",\"short_name\":\"VIC\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Australia\",\"short_name\":\"AU\",\"types\":[\"country\",\"political\"]},{\"long_name\":\"3079\",\"short_name\":\"3079\",\"types\":[\"postal_code\"]}],\"formatted_address\":\"32 Marshall St, Ivanhoe VIC 3079, Australia\",\"geometry\":{\"location\":{\"$a\":-37.774396,\"ab\":145.04667300000006},\"location_type\":\"ROOFTOP\",\"viewport\":{\"Z\":{\"b\":-37.77574498029149,\"d\":-37.77304701970849},\"ca\":{\"b\":145.04532401970846,\"d\":145.04802198029154}}},\"partial_match\":true,\"types\":[\"street_address\"]},{\"address_components\":[{\"long_name\":\"32\",\"short_name\":\"32\",\"types\":[\"street_number\"]},{\"long_name\":\"Marshall St\",\"short_name\":\"Marshall St\",\"types\":[\"route\"]},{\"long_name\":\"Rye\",\"short_name\":\"Rye\",\"types\":[\"locality\",\"political\"]},{\"long_name\":\"Victoria\",\"short_name\":\"VIC\",\"types\":[\"administrative_area_level_1\",\"political\"]},{\"long_name\":\"Australia\",\"short_name\":\"AU\",\"types\":[\"country\",\"political\"]},{\"long_name\":\"3941\",\"short_name\":\"3941\",\"types\":[\"postal_code\"]}],\"formatted_address\":\"32 Marshall St, Rye VIC 3941, Australia\",\"geometry\":{\"location\":{\"$a\":-38.375799,\"ab\":144.841048},\"location_type\":\"ROOFTOP\",\"viewport\":{\"Z\":{\"b\":-38.3771479802915,\"d\":-38.3744500197085},\"ca\":{\"b\":144.83969901970852,\"d\":144.84239698029148}}},\"partial_match\":true,\"types\":[\"street_address\"]}]");
//        address.setAddress("32 Marshall Avenue, Kew, ViC");
//    	addressDAO.put(address);
//    	Address result = addressDAO.get(address.getId());
//    	Assert.assertTrue(address.equals(result));
//    	Address newAddress = Generator.address();
//    	newAddress.setAddress("new address");
//    	address.update(newAddress);
//    	addressDAO.update(address);
//    	result = addressDAO.get(address.getId());
//    	Assert.assertEquals(result.getAddress(), newAddress.getAddress());
//    	addressDAO.deleteAll();
//    }
}
