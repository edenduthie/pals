<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: A bar plotting routine</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="../../R.css">
</head><body>

<table width="100%" summary="page for barp {plotrix}"><tr><td>barp {plotrix}</td><td align="right">R Documentation</td></tr></table>
<h2>A bar plotting routine</h2>


<h3>Description</h3>

<p>
Display a bar plot
</p>


<h3>Usage</h3>

<pre>
 barp(height,width=0.4,names.arg=NULL,legend.lab=NULL,legend.pos="e",
 col=NULL,border=par("fg"),main=NULL,xlab="",ylab="",xlim=NULL,ylim=NULL,
 staxx=FALSE,staxy=FALSE, height.at=NULL,height.lab=NULL,
 cex.axis=par("cex.axis"),cylindrical=FALSE,shadow=FALSE,do.first=NULL)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>height</code></td>
<td>
A numeric vector, matrix or data frame that will be represented
as the heights of bars.</td></tr>
<tr valign="top"><td><code>width</code></td>
<td>
Half the width of a single bar or group of bars in X axis units.</td></tr>
<tr valign="top"><td><code>names.arg</code></td>
<td>
The labels for the bars or groups of bars.</td></tr>
<tr valign="top"><td><code>legend.lab</code></td>
<td>
Labels for an optional legend. If NULL, no legend is
displayed.</td></tr>
<tr valign="top"><td><code>legend.pos</code></td>
<td>
Optional position for the legend as a list with <span class="samp">x</span>
and <span class="samp">y</span> components. The default is to call <span class="samp"><a href="emptyspace.html">emptyspace</a></span>
to position the legend. If this is NA, <span class="samp">locator</span> will be called.</td></tr>
<tr valign="top"><td><code>col</code></td>
<td>
The fill colors for the bars. The default is no fill.</td></tr>
<tr valign="top"><td><code>border</code></td>
<td>
The border for the bars.</td></tr>
<tr valign="top"><td><code>main</code></td>
<td>
The title at the top of the plot.</td></tr>
<tr valign="top"><td><code>xlab,ylab</code></td>
<td>
The labels for the X and Y axes respectively.</td></tr>
<tr valign="top"><td><code>xlim,ylim</code></td>
<td>
Optional horizontal and vertical limits for the plot.</td></tr>
<tr valign="top"><td><code>staxx,staxy</code></td>
<td>
Whether to use <span class="samp"><a href="staxlab.html">staxlab</a></span> to stagger the 
X or Y axis tick labels.</td></tr>
<tr valign="top"><td><code>height.at</code></td>
<td>
Optional positions of the tick marks on the Y axis.</td></tr>
<tr valign="top"><td><code>height.lab</code></td>
<td>
Optional tick labels for the Y axis.</td></tr>
<tr valign="top"><td><code>cex.axis</code></td>
<td>
Character expansion for the axis labels.</td></tr>
<tr valign="top"><td><code>cylindrical</code></td>
<td>
Whether to give the bars a cylindrical appearance
by shading them.</td></tr>
<tr valign="top"><td><code>shadow</code></td>
<td>
Whether to place a shadow behind the bars.</td></tr>
<tr valign="top"><td><code>do.first</code></td>
<td>
An optional expression that will be evaluated before anything
else is displayed on the plot. Useful background colors or lines.</td></tr>
</table>

<h3>Details</h3>

<p>
<span class="samp">barp</span> displays a bar plot similar to <span class="samp">barplot</span> but with axes and
horizontal bar positions more like <span class="samp">plot</span>. Bars or groups of bars are
centered on integral X values, and so both the width and spacing of the bars
are controlled by a single number. If <span class="samp">height</span> is a vector, single bars
representing each value will be displayed centered at <span class="samp">1:length(height)</span>.
If <span class="samp">height</span> is a matrix or data frame, a group of bars will be drawn for
each column, with the values of the group taken from the rows of that column.
The values from <span class="samp">freq</span> or <span class="samp">brkdn</span> in the prettyR package can be
used as the <span class="samp">height</span> argument. The value from <span class="samp">table</span> can also be
passed as <span class="samp">height</span>.
</p>
<p>
Bars are empty by default but fill colors can be defined in several ways.
If a single color is passed, all bars will be the same color. If <span class="samp">height</span>
is a vector, colors will be recycled or some will be ignored if the length of
<span class="samp">col</span> is
not equal to that of <span class="samp">height</span>. If <span class="samp">height</span> is a matrix or data frame,
the user may pass a vector of colors equal to the number of rows in <span class="samp">height</span>
or a matrix of colors of the same dimensions as <span class="samp">height</span>. Other sequences
of color will probably not result in an easy to interpret plot.
</p>
<p>
<span class="samp">barp</span> is intended to simplify illustrating categorical data for which both
the variable designations and the categories are names, as on many multiple
choice questions.  <span class="samp">height.at</span> and <span class="samp">height.lab</span> allow the user to place
labels on the vertical axis, usually representing the options. If <span class="samp">staxx</span>
or <span class="samp">staxy</span> are TRUE, the labels on the horizontal or vertical axes
respectively will be staggered, allowing the user to use many or lengthy variable
or value labels.
</p>
<p>
<span class="samp">barp</span> allows two enhancements that may be useful in those areas where fancy
plots are appreciated. One is to give the bars a cylindrical look by shading the
color. The other is to place an apparent shadow behind each bar. Both of these
effects appear as though the light is coming from the upper left, and this is
hard coded. You can add error bars by calling <span class="samp">dispbars</span>, but many advise against
this.
</p>
<p>
If <span class="samp">legend.lab</span> is not NULL, a legend will be displayed. If 
<span class="samp">legend.pos</span> is NA, <span class="samp">locator</span> is called to place the legend. On 
Windows, the alert may not appear on the console, and the function will 
appear to hang unless the user clicks on the console window or the plot.
</p>


<h3>Value</h3>

<p>
A list containing two components of the same form as <span class="samp">height</span>:
</p>
<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
The centers of the bars displayed.</td></tr>
<tr valign="top"><td><code>y</code></td>
<td>
The heights of the bars.</td></tr>
</table>

<h3>Author(s)</h3>

<p>
Jim Lemon
</p>


<h3>See Also</h3>

<p>
<span class="samp"><a href="staxlab.html">staxlab</a></span>, <span class="samp"><a href="../../graphics/html/barplot.html">barplot</a></span>, <span class="samp"><a href="cylindrect.html">cylindrect</a></span>,
<span class="samp"><a href="gradient.rect.html">gradient.rect</a></span>
</p>


<h3>Examples</h3>

<pre>
 # get some extra room on the left
 par(mar=c(5,5,4,2))
 # make up some happiness data, as so many seem to do
 happyday&lt;-data.frame(Monday=c(2.3,3.4),Tuesday=c(2.8,3.3),Wednesday=c(3.2,3.1),
 Thursday=c(3.6,2.8),Friday=c(4.2,2.6),Saturday=c(4.5,2.9),Sunday=c(4.1,2.8))
 happylabels&lt;-c("Utterly dashed","Rather mopey","Indifferent","Somewhat elated",
  "Euphoric")
 barp(happyday,names.arg=names(happyday),legend.lab=c("Slaves","Unemployed"),
  legend.pos="e",col=c("#ee7700","#3333ff"),main="9AM happiness by weekday",
  xlab="Day of week",ylab="Happiness rating",ylim=c(1,5),staxx=TRUE,staxy=TRUE,
  height.at=1:5,height.lab=happylabels,cex.axis=0.9,cylindrical=TRUE,
  shadow=TRUE)
 # now do a plot with colors scaled to the sex ratio (real data!)
 # notice how zero and one have been added to get the full proportion range
 sexratio&lt;-c(0,1,0.24,0.35,0.09,0.59,0.63,0.34,0.7,0.6)
 # the fun ratings are once again a pack of lies
 funrating&lt;-c(3.2,3.5,1.5,5.4,4.5,2.7,6.8,4.9)
 funstudy&lt;-c("Astronomy","Chemistry","Economics","Anthropology","Linguistics",
  "Math/Stats","Psychology","Sociology")
 funlabels&lt;-c("Torture","Agony","Boredom","Neutral","Entertaining","Exhilarating",
  "Maniacal")
 # in the call to color.scale, the leading zero and one are dropped
 barp(funrating,names.arg=funstudy,main="Fun ratings for various areas of study",
  col=color.scale(sexratio[-c(1,2)],c(0.2,1),c(0.2,0.4),c(1,0.4)),xlab="Study",
  ylab="Rating",height.at=1:7,height.lab=funlabels,ylim=c(1,7),staxx=TRUE,
  staxy=TRUE,cex.axis=0.9)
 # here we want the full scale from zero to one
 color.legend(2,6,4,6.4,legend=c("100% guys","100% girls"),
  rect.col=color.scale(seq(0,1,by=0.25),c(0.2,1),c(0.2,0.4),c(1,0.4)))
 par(mar=c(5,4,4,2))
 # use barp to display a multiple histogram
 h1&lt;-table(cut(rnorm(100,4),breaks=seq(0,8,by=2)))
 h2&lt;-table(cut(rnorm(100,4),breaks=seq(0,8,by=2)))
 h3&lt;-table(cut(rnorm(100,4),breaks=seq(0,8,by=2)))
 hmat&lt;-matrix(c(h1,h2,h3),nrow=3,byrow=TRUE)
 barp(hmat,names.arg=names(h1),width=0.45,col=2:4,
  main="Multiple histogram using barp",xlab="Bins",ylab="Frequency")
 legend(3.8,50,c("h1","h2","h3"),fill=2:4)
</pre>



<hr><div align="center">[Package <em>plotrix</em> version 2.7 <a href="00Index.html">Index</a>]</div>

</body></html>
